<!DOCTYPE html>
<html>
	<head>
		<title> My First Express App</title>
<!-- 
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

			
		  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
		  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
		  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
		  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@700&display=swap" rel="stylesheet">
		  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		  <link rel="stylesheet" href="css/admin_home.css" type="text/css">
		  <meta charset="utf-8">
		  <meta name="viewport" content="width=device-width, initial-scale=1">
  		<script type="text/javascript">
			function searchName(){
				var mess = document.getElementById('search').value;
				if(mess!=''){
					var i=0;
					while(document.getElementsByClassName('studentName')[i]){
						if(document.getElementsByClassName('studentName')[i].innerHTML.indexOf(mess)!=-1 || String(document.getElementsByClassName('studentRno')[i].innerHTML).indexOf(mess)!=-1){
							document.getElementsByClassName('student_details')[i].style.display = '';
							// document.getElementsByClassName('student_details')[i].removeAttribute('style');
						}
						else{
							document.getElementsByClassName('student_details')[i].style.display = 'none';
						}
						i=i+1;
					}
				}
				else{
					var i=0;
					while(document.getElementsByClassName('studentName')[i]){
						document.getElementsByClassName('student_details')[i].style.display = '';
						// document.getElementsByClassName('student_details')[i].removeAttribute('style');
						i=i+1;
					}
				}
			}
		</script>

	</head>
	<body>

		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">Hello, <%=user%></a>
			
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			  </button>
	
			<div class="collapse navbar-collapse" id="collapsibleNavbar">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="/admin_home">Home <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="admin_change_details">Manage</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="/admin_change_password">Change Password</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="logout">Sign Out</a>
					</li>
				</ul>
			</div>
		</nav>
	
	
		<!-- <h1>Hello <%=user%></h1> -->
	
		<%if(0){ %>
		<p>Please <a href='/admin_login'>login</a></p>
		<%}else{ %>
	<!-- 
		<form method="post">
			<p>Date: <input type="date" name="date" required="true" /></p>
			<p>Year of admission: <input type="number" name="year" required="true" /></p>
			<input type="submit" name="submit" value="Submit">
		</form> -->
		<!-- <div class="container">
		<form method="POST">
			<div class="form-group">
			  <label class="input" for="exampleInputEmail1">Date</label>
			  <input type="date" class="form-control" required="true"  name="date" id="exampleInputEmail1" aria-describedby="emailHelp">
			  <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
			<!-- </div>
			<div class="form-group">
			  <label class="input" for="exampleInputPassword1">Year Of Admission</label>
			  <input type="number" name="year" required="true" class="form-control" id="exampleInputPassword1">
			</div>
			
			<button type="submit" class="btn btn-primary">Submit</button>
		  </form>
		</div> --> 
		<div class="container">
		<form method="post">
			<!-- <p>Date: <input type="date" name="date" required="true" /></p> -->
			<div class="form-group">
			<span>Date:</span>
			<input type="date" class="form-control" required="true"  name="date" id="exampleInputEmail1" aria-describedby="emailHelp">
			</div>
			<div class="form-group">
			<p>Choose hostel:
			  	<select class="form-control" id="hostel" name="hostel" style="display: block;">
			    	<option value="JCB">JCB</option>
			    	<option value="VSB">VSB</option>
			    	<option value="APJ">APJ</option>
			  	</select>
			</p>
			</div>
			
			<button type="submit" name="submit" class="btn btn-info">Submit</button>
		</form>
		</div>


		<% if(typeof error != "undefined"){ %>
		<!-- <p><%= error%></p> -->
		<div class="alert alert-danger" role="alert">
			<%= error%>
		  </div>
		<%}else if(typeof students != "undefined"){%>
			<% var i=1%>
		<h4 id="red">List of Absentees</h4>

		<form method='post'><p> <span class="ss input-group-text text-dark">Search:</span> <input type="text" name="search" id='search' onkeyup="searchName()" placeholder="Search for name or rollno" /></p></form>	
			<div class="table-responsive">
		<table class="table table-dark">
			<thead>
			<tr>
				<th scope="col">Name</th>
				<th scope="col">Rno</th>
				<th scope="col">Hostel Name</th>
				<th scope="col">Room No</th>
				<th scope="col">Branch Name</th>
				<th scope="col">Email ID</th>
				<th scope="col">Phone No</th>
				<th scope="col">Total Attendance</th>
			</tr>
			</thead>
			<% var keys = Object.keys(students)%>
			<% keys.forEach(function(key){ %>
			<tbody>
			<tr class="student_details">
				<!-- <th scope="row"><%=i%></th> -->
				<td class="studentName"><%= students[key].Name%> </td>
				<!-- <td><%=key%></td> -->
				<td class="studentRno"><%=key%> </td>
				<td><%=(students[key].HostelName)%></td>
				<td><%=(students[key].RoomNo)%></td>
				<td><%=(students[key].BranchName)%></td>
				<td><%=(students[key].EmailID)%></td>
				<td><%=(students[key].PhoneNo)%></td>
				<td><%=(students[key].TotalAttendance)+'/'+total_days%></td>
			</tr>
		</tbody>
			<%i=i+1});%>
		</table>
	</div>
	<br />
		<%}else{%>
		<!-- <p>Please select date, and year of admission</p> -->
		<div class="alert alert-primary" role="alert">
			Please select date, and year of admission
		  </div>
		<%}%>
			
			
	
			<%} %>
	
	</body>
</html>
